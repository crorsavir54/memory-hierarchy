<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>


    <link rel="stylesheet" href="css/main.css">

    
    <script src="assets/text.js"></script>
    <script src="js/anime.min.js"></script>


</head>

<body>
    <script src="js/pixi.min.js"></script>
    <script src="js/tinycolor.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/global.js"></script>
    <script src="js/memory.js"></script>
    
    <script type="text/javascript">

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
        }

        var ggg = this;
        var ggg = false;

        //Add the canvas that Pixi automatically created for you to the HTML document
        document.body.appendChild(app.view);

        app.stage.addChild(new Memory(100, 100, SETTINGS_DEFAULT));
        let gfx = new PIXI.Graphics();
        app.stage.addChild(gfx);

        
        app.ticker.add((delta)=>{
            gfx.clear();
            if (accessPattern.length){
                gfx.lineStyle(1, 0x00ff00);
                accessPattern.forEach((bit, index)=>{
                    if (index == 0){
                        gfx.moveTo(bit.getGlobalPosition().x, bit.getGlobalPosition().y);
                        return;
                    }
                    let r = bit.id / accessPattern.length;
                    let tc = tinycolor.fromRatio({ h: 0, s: 0, l: r });
                    gfx.lineStyle(5*index/accessPattern.length, 0, 0.8);
                    let pos = bit.getGlobalPosition();
                    gfx.lineTo(pos.x, pos.y);
                });
                if (mousedown) gfx.lineTo(mouse.global.x, mouse.global.y);
                gfx.endFill();
            }
            
        });
        // let xx = 0;
        // app.ticker.add((delta)=>{
        //     if (xx++ > 60){
        //         xx = 0;
        //         accessPattern.forEach((bit)=>{
        //             console.log(bit.getGlobalPosition().x, bit.getGlobalPosition().y);
        //         });
        //     }
            
        //     // console.log(app.renderer.plugins.interaction.mouse.global);
        // });
    </script>
    <style>
        * {
            padding: 0;
            margin: 0
        }
    </style>
</body>

</html>